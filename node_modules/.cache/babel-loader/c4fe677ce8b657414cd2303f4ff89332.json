{"remainingRequest":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/babel-loader/lib/index.js!/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/src/views/ItemListForUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/src/views/ItemListForUser.vue","mtime":1679483917149},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/babel-loader/lib/index.js","mtime":1673878691174},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/vue-loader/lib/index.js","mtime":1673878699755}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90dWRvcmNhbXBhbi9EZXNrdG9wL1NDT0FMQS9saWNlbnRhL0RpcGxvbWFQcm9qZWN0RkUvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm51bWJlci5jb25zdHJ1Y3Rvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IGFwaSBmcm9tICIuLi9hcGkiOwppbXBvcnQgSXRlbURpYWxvZyBmcm9tICIuLi9jb21wb25lbnRzL0l0ZW1EaWFsb2ciOwppbXBvcnQgU29ja0pTIGZyb20gInNvY2tqcy1jbGllbnQiOwppbXBvcnQgU3RvbXAgZnJvbSAid2Vic3RvbXAtY2xpZW50IjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJJdGVtTGlzdCIsCiAgY29tcG9uZW50czogewogICAgSXRlbURpYWxvZzogSXRlbURpYWxvZwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGl0ZW1zOiBbXSwKICAgICAgcmVjZWl2ZWRfbWVzc2FnZXM6IFtdLAogICAgICBzZW5kX21lc3NhZ2U6IG51bGwsCiAgICAgIGNvbm5lY3RlZDogZmFsc2UsCiAgICAgIHNlYXJjaDogIiIsCiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogIklkIiwKICAgICAgICBhbGlnbjogInN0YXJ0IiwKICAgICAgICBzb3J0YWJsZTogZmFsc2UsCiAgICAgICAgdmFsdWU6ICJpZCIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJEZXNjcmlwdGlvbiIsCiAgICAgICAgdmFsdWU6ICJkZXNjcmlwdGlvbiIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJBZGRyZXNzIiwKICAgICAgICB2YWx1ZTogImFkZHJlc3MiCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAiQ29uc3VtcHRpb24iLAogICAgICAgIHZhbHVlOiAiY29uc3VtcHRpb24iCiAgICAgIH1dLAogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwKICAgICAgc2VsZWN0ZWRJdGVtOiB7fQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlZnJlc2hMaXN0OiBmdW5jdGlvbiByZWZyZXNoTGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX3RoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgICAgICAgX3RoaXMuc2VsZWN0ZWRJdGVtID0ge307CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgIHJldHVybiBhcGkuaXRlbXMuYWxsSXRlbXNGb3JVc2VyKCk7CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgIF90aGlzLml0ZW1zID0gX2NvbnRleHQuc2VudDsKCiAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNvbm5lY3Q6IGZ1bmN0aW9uIGNvbm5lY3QoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgdGhpcy5zb2NrZXQgPSBuZXcgU29ja0pTKCJodHRwOi8vbG9jYWxob3N0OjgwODgvYXBpL3dlYnNvY2tldCIpOwogICAgICB0aGlzLnN0b21wQ2xpZW50ID0gU3RvbXAub3Zlcih0aGlzLnNvY2tldCk7CiAgICAgIHRoaXMuc3RvbXBDbGllbnQuY29ubmVjdCh7fSwgZnVuY3Rpb24gKGZyYW1lKSB7CiAgICAgICAgX3RoaXMyLmNvbm5lY3RlZCA9IHRydWU7CiAgICAgICAgY29uc29sZS5sb2coZnJhbWUpOwoKICAgICAgICBfdGhpczIuc3RvbXBDbGllbnQuc3Vic2NyaWJlKCIvdG9waWMiLCBmdW5jdGlvbiAodGljaykgewogICAgICAgICAgY29uc29sZS5sb2codGljayk7CiAgICAgICAgICB2YXIgc3RyID0gdGljay5ib2R5LnNwbGl0KCI6Iik7CgogICAgICAgICAgaWYgKEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXIiKSkuaWQgPT09IE51bWJlcihzdHJbMF0pKSB7CiAgICAgICAgICAgIGFsZXJ0KHRpY2suYm9keSk7CiAgICAgICAgICB9CgogICAgICAgICAgX3RoaXMyLnJlY2VpdmVkX21lc3NhZ2VzLnB1c2goSlNPTi5wYXJzZSh0aWNrLmJvZHkpLmNvbnRlbnQpOwogICAgICAgIH0pOwogICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgX3RoaXMyLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkaXNjb25uZWN0OiBmdW5jdGlvbiBkaXNjb25uZWN0KCkgewogICAgICBpZiAodGhpcy5zdG9tcENsaWVudCkgewogICAgICAgIHRoaXMuc3RvbXBDbGllbnQuZGlzY29ubmVjdCgpOwogICAgICB9CgogICAgICB0aGlzLmNvbm5lY3RlZCA9IGZhbHNlOwogICAgfQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMucmVmcmVzaExpc3QoKTsKICAgIHRoaXMuY29ubmVjdCgpOwogIH0KfTs="},{"version":3,"sources":["ItemListForUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      Devices\n      <v-spacer></v-spacer>\n      <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search\"\n          single-line\n          hide-details\n      ></v-text-field>\n    </v-card-title>\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"items\"\n        :search=\"search\"\n    ></v-data-table>\n    <ItemDialog\n        :opened=\"dialogVisible\"\n        :item=\"selectedItem\"\n        @refresh=\"refreshList\"\n    ></ItemDialog>\n  </v-card>\n</template>\n\n<script>\nimport api from \"../api\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\"\n\nexport default {\n  name: \"ItemList\",\n  components: { ItemDialog },\n  data() {\n    return {\n      items: [],\n      received_messages: [],\n      send_message: null,\n      connected:false,\n      search: \"\",\n      headers: [\n        {\n          text: \"Id\",\n          align: \"start\",\n          sortable: false,\n          value: \"id\",\n        },\n        { text: \"Description\", value: \"description\" },\n        { text: \"Address\", value: \"address\" },\n        { text: \"Consumption\", value: \"consumption\" },\n      ],\n      dialogVisible: false,\n      selectedItem: {},\n    };\n  },\n  methods: {\n\n    async refreshList() {\n      this.dialogVisible = false;\n      this.selectedItem = {};\n      this.items = await api.items.allItemsForUser();\n    },\n\n  connect() {\n    this.socket = new SockJS(\"http://localhost:8088/api/websocket\");\n    this.stompClient = Stomp.over(this.socket);\n    this.stompClient.connect(\n        {},\n        (frame) => {\n          this.connected = true;\n          console.log(frame);\n          this.stompClient.subscribe(\"/topic\", (tick) => {\n            console.log(tick);\n            const str = tick.body.split(\":\");\n            if (\n                JSON.parse(localStorage.getItem(\"user\")).id === Number(str[0])\n            ) {\n              alert(tick.body);\n            }\n            this.received_messages.push(JSON.parse(tick.body).content);\n          });\n        },\n        (error) => {\n          console.log(error);\n          this.connected = false;\n        }\n    );\n  },\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.disconnect();\n    }\n    this.connected=false;\n  },\n  },\n  created() {\n    this.refreshList();\n    this.connect();\n  },\n\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/views"}]}