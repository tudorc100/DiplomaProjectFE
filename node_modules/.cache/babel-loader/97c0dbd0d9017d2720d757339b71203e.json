{"remainingRequest":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/babel-loader/lib/index.js!/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/src/views/ItemListForUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/src/views/ItemListForUser.vue","mtime":1679483917149},{"path":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/babel-loader/lib/index.js","mtime":1673878691174},{"path":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/DS/DS2023_30443_Campan_Tudor_Assignment_1_frontend/node_modules/vue-loader/lib/index.js","mtime":1673878699755}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy90dWRvcmNhbXBhbi9EZXNrdG9wL1NDT0FMQS9EUy9EUzIwMjNfMzA0NDNfQ2FtcGFuX1R1ZG9yX0Fzc2lnbm1lbnRfMV9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgYXBpIGZyb20gIi4uL2FwaSI7CmltcG9ydCBJdGVtRGlhbG9nIGZyb20gIi4uL2NvbXBvbmVudHMvSXRlbURpYWxvZyI7CmltcG9ydCBTb2NrSlMgZnJvbSAic29ja2pzLWNsaWVudCI7CmltcG9ydCBTdG9tcCBmcm9tICJ3ZWJzdG9tcC1jbGllbnQiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkl0ZW1MaXN0IiwKICBjb21wb25lbnRzOiB7CiAgICBJdGVtRGlhbG9nOiBJdGVtRGlhbG9nCiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgaXRlbXM6IFtdLAogICAgICByZWNlaXZlZF9tZXNzYWdlczogW10sCiAgICAgIHNlbmRfbWVzc2FnZTogbnVsbCwKICAgICAgY29ubmVjdGVkOiBmYWxzZSwKICAgICAgc2VhcmNoOiAiIiwKICAgICAgaGVhZGVyczogW3sKICAgICAgICB0ZXh0OiAiSWQiLAogICAgICAgIGFsaWduOiAic3RhcnQiLAogICAgICAgIHNvcnRhYmxlOiBmYWxzZSwKICAgICAgICB2YWx1ZTogImlkIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkRlc2NyaXB0aW9uIiwKICAgICAgICB2YWx1ZTogImRlc2NyaXB0aW9uIgogICAgICB9LCB7CiAgICAgICAgdGV4dDogIkFkZHJlc3MiLAogICAgICAgIHZhbHVlOiAiYWRkcmVzcyIKICAgICAgfSwgewogICAgICAgIHRleHQ6ICJDb25zdW1wdGlvbiIsCiAgICAgICAgdmFsdWU6ICJjb25zdW1wdGlvbiIKICAgICAgfV0sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBzZWxlY3RlZEl0ZW06IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgcmVmcmVzaExpc3Q6IGZ1bmN0aW9uIHJlZnJlc2hMaXN0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5kaWFsb2dWaXNpYmxlID0gZmFsc2U7CiAgICAgICAgICAgICAgICBfdGhpcy5zZWxlY3RlZEl0ZW0gPSB7fTsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgICAgcmV0dXJuIGFwaS5pdGVtcy5hbGxJdGVtc0ZvclVzZXIoKTsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgX3RoaXMuaXRlbXMgPSBfY29udGV4dC5zZW50OwoKICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgY29ubmVjdDogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLnNvY2tldCA9IG5ldyBTb2NrSlMoImh0dHA6Ly9sb2NhbGhvc3Q6ODA4OC9hcGkvd2Vic29ja2V0Iik7CiAgICAgIHRoaXMuc3RvbXBDbGllbnQgPSBTdG9tcC5vdmVyKHRoaXMuc29ja2V0KTsKICAgICAgdGhpcy5zdG9tcENsaWVudC5jb25uZWN0KHt9LCBmdW5jdGlvbiAoZnJhbWUpIHsKICAgICAgICBfdGhpczIuY29ubmVjdGVkID0gdHJ1ZTsKICAgICAgICBjb25zb2xlLmxvZyhmcmFtZSk7CgogICAgICAgIF90aGlzMi5zdG9tcENsaWVudC5zdWJzY3JpYmUoIi90b3BpYyIsIGZ1bmN0aW9uICh0aWNrKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyh0aWNrKTsKICAgICAgICAgIHZhciBzdHIgPSB0aWNrLmJvZHkuc3BsaXQoIjoiKTsKCiAgICAgICAgICBpZiAoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlciIpKS5pZCA9PT0gTnVtYmVyKHN0clswXSkpIHsKICAgICAgICAgICAgYWxlcnQodGljay5ib2R5KTsKICAgICAgICAgIH0KCiAgICAgICAgICBfdGhpczIucmVjZWl2ZWRfbWVzc2FnZXMucHVzaChKU09OLnBhcnNlKHRpY2suYm9keSkuY29udGVudCk7CiAgICAgICAgfSk7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICBfdGhpczIuY29ubmVjdGVkID0gZmFsc2U7CiAgICAgIH0pOwogICAgfSwKICAgIGRpc2Nvbm5lY3Q6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoKSB7CiAgICAgIGlmICh0aGlzLnN0b21wQ2xpZW50KSB7CiAgICAgICAgdGhpcy5zdG9tcENsaWVudC5kaXNjb25uZWN0KCk7CiAgICAgIH0KCiAgICAgIHRoaXMuY29ubmVjdGVkID0gZmFsc2U7CiAgICB9CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5yZWZyZXNoTGlzdCgpOwogICAgdGhpcy5jb25uZWN0KCk7CiAgfQp9Ow=="},{"version":3,"sources":["ItemListForUser.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <v-card>\n    <v-card-title>\n      Devices\n      <v-spacer></v-spacer>\n      <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"Search\"\n          single-line\n          hide-details\n      ></v-text-field>\n    </v-card-title>\n    <v-data-table\n        :headers=\"headers\"\n        :items=\"items\"\n        :search=\"search\"\n    ></v-data-table>\n    <ItemDialog\n        :opened=\"dialogVisible\"\n        :item=\"selectedItem\"\n        @refresh=\"refreshList\"\n    ></ItemDialog>\n  </v-card>\n</template>\n\n<script>\nimport api from \"../api\";\nimport ItemDialog from \"../components/ItemDialog\";\nimport SockJS from \"sockjs-client\";\nimport Stomp from \"webstomp-client\"\n\nexport default {\n  name: \"ItemList\",\n  components: { ItemDialog },\n  data() {\n    return {\n      items: [],\n      received_messages: [],\n      send_message: null,\n      connected:false,\n      search: \"\",\n      headers: [\n        {\n          text: \"Id\",\n          align: \"start\",\n          sortable: false,\n          value: \"id\",\n        },\n        { text: \"Description\", value: \"description\" },\n        { text: \"Address\", value: \"address\" },\n        { text: \"Consumption\", value: \"consumption\" },\n      ],\n      dialogVisible: false,\n      selectedItem: {},\n    };\n  },\n  methods: {\n\n    async refreshList() {\n      this.dialogVisible = false;\n      this.selectedItem = {};\n      this.items = await api.items.allItemsForUser();\n    },\n\n  connect() {\n    this.socket = new SockJS(\"http://localhost:8088/api/websocket\");\n    this.stompClient = Stomp.over(this.socket);\n    this.stompClient.connect(\n        {},\n        (frame) => {\n          this.connected = true;\n          console.log(frame);\n          this.stompClient.subscribe(\"/topic\", (tick) => {\n            console.log(tick);\n            const str = tick.body.split(\":\");\n            if (\n                JSON.parse(localStorage.getItem(\"user\")).id === Number(str[0])\n            ) {\n              alert(tick.body);\n            }\n            this.received_messages.push(JSON.parse(tick.body).content);\n          });\n        },\n        (error) => {\n          console.log(error);\n          this.connected = false;\n        }\n    );\n  },\n  disconnect() {\n    if (this.stompClient) {\n      this.stompClient.disconnect();\n    }\n    this.connected=false;\n  },\n  },\n  created() {\n    this.refreshList();\n    this.connect();\n  },\n\n};\n</script>\n\n<style scoped></style>\n"],"sourceRoot":"src/views"}]}