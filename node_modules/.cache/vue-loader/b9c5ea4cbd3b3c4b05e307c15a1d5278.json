{"remainingRequest":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/src/components/UserDialog.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/src/components/UserDialog.vue","mtime":1692731580408},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/babel-loader/lib/index.js","mtime":1673878691174},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/cache-loader/dist/cjs.js","mtime":1673878691195},{"path":"/Users/tudorcampan/Desktop/SCOALA/licenta/DiplomaProjectFE/node_modules/vue-loader/lib/index.js","mtime":1673878699755}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGkgZnJvbSAiLi4vYXBpIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVzZXJEaWFsb2ciLAogIHByb3BzOiB7CiAgICB1c2VyOiBPYmplY3QsCiAgICBvcGVuZWQ6IEJvb2xlYW4sCiAgfSwKICBtZXRob2RzOiB7CiAgICBwZXJzaXN0KCkgewogICAgICBpZiAodGhpcy5pc05ldykgewogICAgICAgIGFwaS51c2VycwogICAgICAgICAgLmNyZWF0ZSh7CiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnVzZXIuZW1haWwsCiAgICAgICAgICAgIGNucDp0aGlzLnVzZXIuY25wLAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy51c2VyLnBhc3N3b3JkLAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJGVtaXQoInJlZnJlc2giKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYXBpLnVzZXJzCiAgICAgICAgICAuZWRpdCh7CiAgICAgICAgICAgIGlkOiB0aGlzLnVzZXIuaWQsCiAgICAgICAgICAgIHVzZXJuYW1lOiB0aGlzLnVzZXIudXNlcm5hbWUsCiAgICAgICAgICAgIGVtYWlsOiB0aGlzLnVzZXIuZW1haWwsCiAgICAgICAgICAgIGNucDp0aGlzLnVzZXIuY25wLAogICAgICAgICAgICBwYXNzd29yZDogdGhpcy51c2VyLnBhc3N3b3JkCiAgICAgICAgICB9KQogICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy4kZW1pdCgicmVmcmVzaCIpKTsKICAgICAgfQogICAgfSwKICAgIGRlbGV0ZUZ1bmMoKXsKICAgICAgICBpZiAoIXRoaXMuaXNOZXcpIHsKICAgICAgICBhcGkudXNlcnMKICAgICAgICAgIC5kZWxldGUoewogICAgICAgICAgICBpZDogdGhpcy51c2VyLmlkLAogICAgICAgICAgfSkKICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuJGVtaXQoInJlZnJlc2giKSk7CiAgICAgIH0KICAgIH0sCiAgICBtZWRpY2FsUmVjb3Jkc0xpc3QoKQogICAgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgdGhpcy51c2VyLmlkKTsKICAgICAgcm91dGVyLnB1c2goIi9tZWRpY2FsUmVjb3JkcyIpOwogICAgfSwKICAgIHN0YXR1c0xpc3QoKQogICAgewogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlcklkJywgdGhpcy51c2VyLmlkKTsKICAgICAgcm91dGVyLnB1c2goIi9zdGF0dXMiKTsKICAgIH0sCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzTmV3OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAhdGhpcy51c2VyLmlkOwogICAgfSwKICAgIGlzQWRtaW46IGZ1bmN0aW9uICgpCiAgICB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyJhdXRoL2lzQWRtaW4iXTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["UserDialog.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UserDialog.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <v-dialog\n    transition=\"dialog-bottom-transition\"\n    max-width=\"600\"\n    :value=\"opened\"\n  >\n    <template>\n      <v-card>\n        <v-toolbar color=\"primary\" dark v-if=\"isAdmin\">\n          {{ isNew ? \"Create user\" : \"Edit user\" }}\n        </v-toolbar>\n        <v-form>\n          <v-text-field v-model=\"user.username\" label=\"Username\" :readonly=\"!isAdmin\"/>\n          <v-text-field v-model=\"user.email\" label=\"Email\" :readonly=\"!isAdmin\"/>\n          <v-text-field v-model=\"user.cnp\" label=\"Cnp\" :readonly=\"!isAdmin\"/>\n          <v-text-field v-model=\"user.password\" label=\"Password\" :readonly=\"!isAdmin\"/>\n        </v-form>\n        <v-card-actions>\n          <v-btn v-if=\"isAdmin\" @click=\"persist\">\n            {{ isNew ? \"Create\" : \"Save\" }}\n          </v-btn>\n          <v-btn @click=\"deleteFunc\" v-if=\"!isNew && isAdmin\">\n            Delete\n          </v-btn>\n          <v-btn @click=\"medicalRecordsList\" v-if=\"!isNew\">\n            See medical records\n          </v-btn>\n          <v-btn @click=\"statusList\" v-if=\"!isNew\">\n            See status\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </template>\n  </v-dialog>\n</template>\n\n<script>\nimport api from \"../api\";\nimport router from \"@/router\";\n\nexport default {\n  name: \"UserDialog\",\n  props: {\n    user: Object,\n    opened: Boolean,\n  },\n  methods: {\n    persist() {\n      if (this.isNew) {\n        api.users\n          .create({\n            username: this.user.username,\n            email: this.user.email,\n            cnp:this.user.cnp,\n            password: this.user.password,\n          })\n          .then(() => this.$emit(\"refresh\"));\n      } else {\n        api.users\n          .edit({\n            id: this.user.id,\n            username: this.user.username,\n            email: this.user.email,\n            cnp:this.user.cnp,\n            password: this.user.password\n          })\n          .then(() => this.$emit(\"refresh\"));\n      }\n    },\n    deleteFunc(){\n        if (!this.isNew) {\n        api.users\n          .delete({\n            id: this.user.id,\n          })\n          .then(() => this.$emit(\"refresh\"));\n      }\n    },\n    medicalRecordsList()\n    {\n      localStorage.setItem('userId', this.user.id);\n      router.push(\"/medicalRecords\");\n    },\n    statusList()\n    {\n      localStorage.setItem('userId', this.user.id);\n      router.push(\"/status\");\n    },\n  },\n\n  computed: {\n    isNew: function () {\n      return !this.user.id;\n    },\n    isAdmin: function ()\n    {\n      return this.$store.getters[\"auth/isAdmin\"];\n    },\n  },\n};\n</script>\n\n<style scoped></style>\n"]}]}